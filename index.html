<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìç–ú—É—Ä–∏–Ω–æ</title>
<style>
  body { 
    margin:0; font-family:'Segoe UI',sans-serif; background:#2C2F33; color:#FFF; display:flex; flex-direction:column; align-items:center; min-height:100vh; 
  }

  header { 
    width:100%; background:#23272A; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; box-sizing:border-box; 
  }

  header h1 { font-size:1.5rem; }
  header button { padding:5px 12px; font-size:0.9rem; cursor:pointer; border:none; border-radius:5px; background-color:#7289DA; color:#FFF; }

  main { display:flex; flex:1; width:90%; max-width:1200px; margin-top:20px; gap:20px; }

  .sidebar { width:250px; display:flex; flex-direction:column; gap:15px; }

  .stat-block { background:#23272A; padding:15px; border-radius:10px; text-align:center; font-size:1.1rem; display:flex; flex-direction:column; gap:5px; opacity:0; transform: translateY(30px); animation: fadeIn 1s forwards; }
  .stat-block span { font-size:2rem; }

  .join-btn { background-color:#7289DA; color:#FFF; border:none; padding:10px; font-size:1rem; border-radius:8px; cursor:pointer; margin-top:10px; opacity:0; transform: translateY(30px); animation: fadeIn 1s forwards 0.3s; }

  .announcements { flex:1; background:#23272A; border-radius:10px; padding:15px; display:flex; flex-direction:column; gap:15px; overflow-y:auto; max-height:600px; opacity:0; transform: translateY(30px); animation: fadeIn 1s forwards 0.6s; }

  .announcement { background:#2C2F33; padding:10px; border-radius:8px; backdrop-filter: blur(2px); }
  .announcement .author { font-weight:bold; display:flex; align-items:center; gap:10px; }
  .announcement img { max-width:100%; border-radius:5px; pointer-events:none; }

  @keyframes fadeIn {
    to { opacity:1; transform: translateY(0); }
  }
</style>
</head>
<body>
  <header>
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å–∞–π—Ç —Å–µ—Ä–≤–µ—Ä–∞ üìç–ú—É—Ä–∏–Ω–æ</h1>
    <button onclick="location.href='minecraft.html'">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Minecraft</button>
  </header>

  <main>
    <div class="sidebar">
      <div class="stat-block">üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: <span id="totalMembers">0</span></div>
      <div class="stat-block">üü¢ –û–Ω–ª–∞–π–Ω: <span id="onlineCount">0</span></div>
      <div class="stat-block">üé§ –í –≤–æ–π—Å–µ: <span id="voiceCount">0</span></div>
      <button class="join-btn" onclick="window.open('https://discord.gg/wjvHYrTYwZ', '_blank')">–í—Å—Ç—É–ø–∏—Ç—å</button>
    </div>

    <div class="announcements" id="announcements"></div>
  </main>

<script>
async function loadData() {
  try {
    const res = await fetch('data.json?t=' + new Date().getTime());
    const data = await res.json();

    document.getElementById('totalMembers').textContent = data.totalMembers;
    document.getElementById('onlineCount').textContent = data.onlineCount;
    document.getElementById('voiceCount').textContent = data.voiceCount;

    const announcements = document.getElementById('announcements');
    announcements.innerHTML = '';
    data.messages.forEach(msg => {
      const block = document.createElement('div');
      block.className = 'announcement';
      const author = document.createElement('div');
      author.className = 'author';
      author.innerHTML = `${msg.author}`;
      block.appendChild(author);

      const content = document.createElement('div');
      content.textContent = msg.content;
      block.appendChild(content);

      msg.attachments.forEach(a => {
        const img = document.createElement('img');
        img.src = a.url;
        block.appendChild(img);
      });

      announcements.appendChild(block);
    });

  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ data.json:', err);
  }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ä–∞–∑—É –∏ –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã
loadData();
setInterval(loadData, 180000);
</script>
</body>
</html>
